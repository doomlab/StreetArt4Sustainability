<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="generator" content="Observable Framework v1.13.3">
<title>StreetArt4Sustainability</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="preload" as="style" href="./_observablehq/theme-air,near-midnight.dcdbf18e.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&amp;display=swap" crossorigin>
<link rel="stylesheet" type="text/css" href="./_observablehq/theme-air,near-midnight.dcdbf18e.css">
<link rel="modulepreload" href="./_observablehq/client.919d03bd.js">
<link rel="modulepreload" href="./_observablehq/runtime.e080113b.js">
<link rel="modulepreload" href="./_observablehq/stdlib.73a8ec5a.js">
<link rel="modulepreload" href="./_npm/d3-dsv@3.0.1/9cffc2bd.js">
<link rel="icon" href="./_file/observable.1af93621.png" type="image/png" sizes="32x32">
<script type="module">

import {define} from "./_observablehq/client.919d03bd.js";
import {registerFile} from "./_observablehq/stdlib.73a8ec5a.js";

registerFile("./data/DisplayAppMeans.csv", {"name":"./data/DisplayAppMeans.csv","mimeType":"text/csv","path":"./_file/data/DisplayAppMeans.fdc58656.csv","lastModified":1766168207565,"size":282860});
registerFile("./data/Metadata_StreetArt4Sustainability.csv", {"name":"./data/Metadata_StreetArt4Sustainability.csv","mimeType":"text/csv","path":"./_file/data/Metadata_StreetArt4Sustainability.f7270e22.csv","lastModified":1766448887027,"size":321283});

define({id: "8bc8cd33", inputs: ["FileAttachment"], outputs: ["emotions_df","metadata_df"], body: async (FileAttachment) => {
// Load CSV files from src/data
const emotions_df = await FileAttachment(
  "./data/DisplayAppMeans.csv"
).csv({ typed: true });

const metadata_df = await FileAttachment(
  "./data/Metadata_StreetArt4Sustainability.csv"
).csv({ typed: true });
return {emotions_df,metadata_df};
}});

define({id: "9138e14c", inputs: ["emotions_df","Plotly","metadata_df"], outputs: ["countries","excluded","numericColumns","countrySelect","xSelect","ySelect","plotEl","detailsBox","updatePlot"], body: (emotions_df,Plotly,metadata_df) => {
// Build dropdown options
const countries = Array.from(
  new Set(emotions_df.map(d => d.Group))
).filter(Boolean).sort();

const excluded = new Set(["PictureID", "n"]);

const numericColumns = Object.keys(emotions_df[0]).filter(col =>
  col !== "Group" &&
  !excluded.has(col) &&
  emotions_df.some(d => typeof d[col] === "number")
);

// Grab DOM elements
const countrySelect = document.getElementById("country-select");
const xSelect = document.getElementById("x-select");
const ySelect = document.getElementById("y-select");
const plotEl = document.getElementById("scatterplot-container");
const detailsBox = document.getElementById("point-details");

// Populate selects
countrySelect.innerHTML = countries
  .map(c => `<option value="${c}">${c}</option>`)
  .join("");

xSelect.innerHTML = numericColumns
  .map(v => `<option value="${v}">${v}</option>`)
  .join("");

ySelect.innerHTML = numericColumns
  .map(v => `<option value="${v}">${v}</option>`)
  .join("");

// Initial values
countrySelect.value = countries[0];
xSelect.value = numericColumns[0];
ySelect.value = numericColumns[1];

// Plot update function
function updatePlot() {
  const selectedCountry = countrySelect.value;
  const x = xSelect.value;
  const y = ySelect.value;

  const filtered = emotions_df.filter(d => d.Group === selectedCountry);

  Plotly.react(
    plotEl,
    [
      {
        x: filtered.map(d => d[x]),
        y: filtered.map(d => d[y]),
        customdata: filtered,
        mode: "markers",
        type: "scatter",
        marker: { size: 8, opacity: 0.7 }
      }
    ],
    {
      title: { text: `${y} vs ${x} (${selectedCountry})` },
      xaxis: { title: { text: x }, automargin: true },
      yaxis: { title: { text: y }, automargin: true },
      margin: { t: 60, r: 20, b: 60, l: 70 }
    }
  );
}

// Initial render
updatePlot();

// Update on dropdown change
countrySelect.addEventListener("change", updatePlot);
xSelect.addEventListener("change", updatePlot);
ySelect.addEventListener("change", updatePlot);

// Click handler
plotEl.on("plotly_click", (event) => {
  const d = event.points[0].customdata;

  // Join metadata: PictureID (emotions) â†” Number (metadata)
  const meta = metadata_df.find(
    m => String(m.Number) === String(d.PictureID)
  );

  detailsBox.innerHTML = `
    <strong>Selected artwork</strong><br>
    <b>Country:</b> ${d.Group}<br>
    <b>${xSelect.value}:</b> ${d[xSelect.value]}<br>
    <b>${ySelect.value}:</b> ${d[ySelect.value]}<br>
    <b>Picture ID:</b> ${d.PictureID ?? "NA"}<br><br>
    <img
    src="/imgs/${String(d.PictureID).padStart(3, "0")}.jpg"
    alt="Artwork ${d.PictureID}"
    style="max-width: 100%; height: auto; margin-bottom: 0.75rem;" /><br><br>

    <strong>Metadata</strong><br>
    <b>Artist:</b> ${meta?.Artist ?? "NA"}<br>
    <b>Title:</b> ${meta?.Title ?? "NA"}<br>
    <b>Year:</b> ${meta?.Year ?? "NA"}<br>
    <b>Location:</b> ${meta?.Location ?? "NA"}<br>
    <b>Description:</b> ${meta?.Description ?? "NA"}<br>
    ${
      meta?.Link
        ? `<b>Link:</b> <a href="${meta.Link}" target="_blank" rel="noopener">View artwork</a><br>`
        : ""
    }
    <b>Copyright:</b> ${meta?.Copyright ?? "NA"}
  `;
});
return {countries,excluded,numericColumns,countrySelect,xSelect,ySelect,plotEl,detailsBox,updatePlot};
}});

</script>
</head>
<body>
<input id="observablehq-sidebar-toggle" type="checkbox" title="Toggle sidebar">
<label id="observablehq-sidebar-backdrop" for="observablehq-sidebar-toggle"></label>
<nav id="observablehq-sidebar">
  <ol>
    <label id="observablehq-sidebar-close" for="observablehq-sidebar-toggle"></label>
    <li class="observablehq-link observablehq-link-active"><a href="./index">StreetArt4Sustainability</a></li>
  </ol>
  <ol>
    <li class="observablehq-link"><a href="./example-dashboard">Example dashboard</a></li>
    <li class="observablehq-link"><a href="./example-report">Example report</a></li>
  </ol>
</nav>
<script>{const e=document.querySelector("#observablehq-sidebar"),o=document.querySelector("#observablehq-sidebar-toggle"),r=sessionStorage.getItem("observablehq-sidebar");r?o.checked=r==="true":o.indeterminate=!0;for(const t of document.querySelectorAll("#observablehq-sidebar summary")){const s=t.parentElement;switch(sessionStorage.getItem(`observablehq-sidebar:${t.textContent}`)){case"true":s.open=!0;break;case"false":s.classList.contains("observablehq-section-active")||(s.open=!1);break}}addEventListener("beforeunload",()=>sessionStorage.setItem("observablehq-sidebar-scrolly",`${e.scrollTop}`));const a=sessionStorage.getItem("observablehq-sidebar-scrolly");a!=null&&(e.style.cssText="overflow: hidden;",e.scrollTop=+a,e.style.cssText="");}</script>
<div id="observablehq-center">
<main id="observablehq-main" class="observablehq">
<script src="https://cdn.jsdelivr.net/npm/plotly.js-dist-min"></script>
<div class="observablehq observablehq--block"><!--:8bc8cd33:--></div>
<div class="card" style="margin-bottom: 1.5rem;">
  <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem;">
    <div class="inline-control">
      <span class="inline-label"><strong>Country</strong></span>
      <select id="country-select"></select>
    </div>
    <div class="inline-control">
      <span class="inline-label"><strong>X variable</strong></span>
      <select id="x-select"></select>
    </div>
    <div class="inline-control">
      <span class="inline-label"><strong>Y variable</strong></span>
      <select id="y-select"></select>
    </div>
  </div>
</div>
<div id="scatterplot-container"></div>
<div id="point-details" class="card" style="margin-top: 1rem;">
  <em>Click a point to see details.</em>
</div>
<div class="observablehq observablehq--block"><!--:9138e14c:--></div>
<style>

.hero {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-family: var(--sans-serif);
  margin: 4rem 0 8rem;
  text-wrap: balance;
  text-align: center;
}

.hero h1 {
  margin: 1rem 0;
  padding: 1rem 0;
  max-width: none;
  font-size: 14vw;
  font-weight: 900;
  line-height: 1;
  background: linear-gradient(30deg, var(--theme-foreground-focus), currentColor);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hero h2 {
  margin: 0;
  max-width: 34em;
  font-size: 20px;
  font-style: initial;
  font-weight: 500;
  line-height: 1.5;
  color: var(--theme-foreground-muted);
}

@media (min-width: 640px) {
  .hero h1 {
    font-size: 90px;
  }
}

/* Larger dropdown controls for embedded dashboard */
.card select,
.card label {
  font-size: 1.15rem;
}

.card select {
  padding: 0.6rem 0.75rem;
}

.inline-control {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.inline-control select {
  min-width: 200px;
}

.inline-label {
  white-space: nowrap;
  font-weight: 600;
}



</style>
</main>
<footer id="observablehq-footer">
<nav><a rel="next" href="./example-dashboard"><span>Example dashboard</span></a></nav>
<div>Built with <a href="https://observablehq.com/" target="_blank" rel="noopener noreferrer">Observable</a> on <a title="2025-12-22T18:59:50">Dec 22, 2025</a>.</div>
</footer>
</div>
</body>
</html>
